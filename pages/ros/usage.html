<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>ROS - Usage &#8212; RKO-LIO: Lidar-inertial odometry without sensor-specific modeling</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=5ecbeea2" />
    <link rel="stylesheet" type="text/css" href="../../_static/basic.css?v=b08954a9" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css?v=f6a572b4" />
    <link rel="stylesheet" type="text/css" href="../../_static/collapsible-lists/css/tree_view.css?v=a885cde7" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css?v=56c4699f" />
    <script src="../../_static/documentation_options.js?v=ca7ad2ea"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/collapsible-lists/js/CollapsibleLists.compressed.js?v=73120307"></script>
    <script src="../../_static/collapsible-lists/js/apply-collapsible-lists.js?v=660e4f45"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="C++ API" href="../../generated/index.html" />
    <link rel="prev" title="ROS - Setup" href="setup.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">RKO-LIO</a></h1>



<p class="blurb">Lidar-inertial odometry</p>




<p>
<iframe src="https://ghbtns.com/github-btn.html?user=PRBonn&repo=rko_lio&type=star&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>






<search id="searchbox" style="display: none" role="search">
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="Search"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="../primer.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data.html">Data</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="ros.html">ROS</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="setup.html">Setup</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../generated/index.html">C++ API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../__PACKAGE.html">ROS package.xml</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog_literal.html">Changelog</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../python/python.html">Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../config.html">Configuring</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core_dependencies.html">Dependencies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../__LICENSE.html">License</a></li>
</ul>


<hr />
<ul>
    
    <li class="toctree-l1"><a href="https://index.ros.org/p/rko_lio/">ROS Index</a></li>
    
    <li class="toctree-l1"><a href="https://pypi.org/project/rko-lio/">PyPI</a></li>
    
    <li class="toctree-l1"><a href="https://github.com/PRBonn/rko_lio">GitHub</a></li>
    
</ul>

        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="ros-usage">
<h1>ROS - Usage<a class="headerlink" href="#ros-usage" title="Link to this heading">¶</a></h1>
<p>I provide an online node component, a standalone online node, and an offline node.</p>
<p>The offline node provides a way to directly read data from a rosbag, instead of the usual pattern of playing the bag with <code class="docutils literal notranslate"><span class="pre">ros2</span> <span class="pre">bag</span> <span class="pre">play</span></code>.</p>
<p>Both nodes can be launched via the <code class="docutils literal notranslate"><span class="pre">odometry.launch.py</span></code> launch file, specifying the <code class="docutils literal notranslate"><span class="pre">mode</span></code> argument (default: <code class="docutils literal notranslate"><span class="pre">online</span></code>).</p>
<p>To see all possible configuration options:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ros2<span class="w"> </span>launch<span class="w"> </span>rko_lio<span class="w"> </span>odometry.launch.py<span class="w"> </span>-s
</pre></div>
</div>
<p>That will also provide additional documentation about the different parameters.</p>
<p>For some additional details regarding the odometry parameters and data itself, please refer to <a class="reference internal" href="../config.html"><span class="doc">Configuring the odometry</span></a> and <a class="reference internal" href="../data.html"><span class="doc">The sensor data</span></a>.
ROS-specific parameters are covered here.</p>
<p>At minimum, you’ll need to specify the <code class="docutils literal notranslate"><span class="pre">lidar_topic</span></code>, <code class="docutils literal notranslate"><span class="pre">imu_topic</span></code> and <code class="docutils literal notranslate"><span class="pre">base_frame</span></code> parameters.</p>
<p>You can define all parameters in a config file and pass it with the launch argument <code class="docutils literal notranslate"><span class="pre">config_file:=/path</span></code>.
Please note that we don’t modify the path you provide in any way.</p>
<p>If your TF tree is well defined, i.e., it exists and the message frame ids match the frame ids in the TF tree (I’ve seen both conditions fail), then the sensor frame ids are picked up from the topics and the extrinsics via TF lookup.</p>
<p>Otherwise you’ll need to either specify just the frame ids (if there’s a mismatch), or specify the extrinsics via <code class="docutils literal notranslate"><span class="pre">extrinsic_lidar2base_quat_xyzw_xyz</span></code> written as quaternion (xyzw) and translation (xyz) in a list (only supported via a config file).
Similarly for the IMU to base as <code class="docutils literal notranslate"><span class="pre">extrinsic_imu2base_quat_xyzw_xyz</span></code>.</p>
<p>But really, if you have a TF problem, just fix it instead.</p>
<p><code class="docutils literal notranslate"><span class="pre">config/default.yaml</span></code> specifies the default set of parameters explicitly, and also leaves some placeholders you can modify to pass the <code class="docutils literal notranslate"><span class="pre">lidar_topic</span></code> and similar.</p>
<p>Please note that the parameter definitions from the CLI will override those provided in a config file.</p>
<p>You can enable RViz visualization by passing <code class="docutils literal notranslate"><span class="pre">rviz:=true</span></code> which launches an RViz window simultaneously using the default RViz config file in <code class="docutils literal notranslate"><span class="pre">config/default.rviz</span></code>.</p>
<p>An example full invocation with RViz can look like this:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ros2<span class="w"> </span>launch<span class="w"> </span>rko_lio<span class="w"> </span>odometry.launch.py<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>config_file:<span class="o">=</span>/path/to/config/file<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>rviz:<span class="o">=</span><span class="nb">true</span>
</pre></div>
</div>
<section id="published-topics">
<h2>Published topics<a class="headerlink" href="#published-topics" title="Link to this heading">¶</a></h2>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">/rko_lio/odometry</span></code>: Odometry topic, the name can be modified using the <code class="docutils literal notranslate"><span class="pre">odom_topic</span></code> parameter.</p>
<p>This also includes the twist of the <code class="docutils literal notranslate"><span class="pre">base_frame</span></code> expressed in <code class="docutils literal notranslate"><span class="pre">base_frame</span></code> coordinates.
This twist is estimated from the LiDAR scan registration.</p>
<p>A TF is also simultaneously published from the <code class="docutils literal notranslate"><span class="pre">base_frame</span></code> to the <code class="docutils literal notranslate"><span class="pre">odom_frame</span></code>.
Please note the parameter <code class="docutils literal notranslate"><span class="pre">invert_odom_tf</span></code> in case your TF configuration requires this (you’re running multiple odometries or some other complicated setup).</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">/rko_lio/frame</span></code>: The input LiDAR scan deskewed using the IMU data.</p>
<p>Only published if <code class="docutils literal notranslate"><span class="pre">publish_deskewed_scan:=true</span></code>.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">/rko_lio/local_map</span></code>: The local map the odometry maintains is published at a set frequency given by <code class="docutils literal notranslate"><span class="pre">publish_map_after</span></code> (seconds), and only if <code class="docutils literal notranslate"><span class="pre">publish_local_map:=true</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/rko_lio/linear_acceleration</span></code>: Linear acceleration of the <code class="docutils literal notranslate"><span class="pre">base_frame</span></code> expressed in <code class="docutils literal notranslate"><span class="pre">base_frame</span></code> coordinates.</p>
<p>Note that this acceleration can be quite noisy, as it is essentially a double time derivative of the pose update from the LiDAR scan registration (similar to the twist/velocity).</p>
<p>Only published if <code class="docutils literal notranslate"><span class="pre">publish_lidar_acceleration:=true</span></code>.</p>
</li>
</ul>
</section>
<section id="offline-node">
<h2>Offline node<a class="headerlink" href="#offline-node" title="Link to this heading">¶</a></h2>
<p>As mentioned before, you can use the offline node to read a bag directly and run the odometry on it at the same time.</p>
<p>Specify <code class="docutils literal notranslate"><span class="pre">mode:=offline</span></code> as the default is <code class="docutils literal notranslate"><span class="pre">online</span></code>.</p>
<p>Pass the <code class="docutils literal notranslate"><span class="pre">bag_path:=</span></code> parameter to the launch file, which should be a folder containing the <code class="docutils literal notranslate"><span class="pre">.db3</span></code> or <code class="docutils literal notranslate"><span class="pre">.mcap</span></code> or other ROS-supported formats (you probably need the respective plugins).</p>
<p>The offline node additionally publishes a convenient topic <code class="docutils literal notranslate"><span class="pre">/rko_lio/bag_progress</span></code> which you can use to monitor bag playing progress.
It has two values, a percentage completion and an ETA.</p>
<p>An example invocation would then look like:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ros2<span class="w"> </span>launch<span class="w"> </span>rko_lio<span class="w"> </span>odometry.launch.py<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>config_file:<span class="o">=</span>/path/to/config/file<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>rviz:<span class="o">=</span><span class="nb">true</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>mode:<span class="o">=</span>offline<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>bag_path:<span class="o">=</span>/path/to/rosbag/directory
</pre></div>
</div>
</section>
</section>


          </div>
              <div class="related bottom">
                &nbsp;
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="setup.html" title="Previous document">ROS - Setup</a>
        </li>
        <li>
          <a href="../../generated/index.html" title="Next document">C++ API</a>
          &rarr;
        </li>
    </ul>
  </nav>
              </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &#169;2025 Meher Malladi.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.2.3</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="../../_sources/pages/ros/usage.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>