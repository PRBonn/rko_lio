<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Configuring the odometry &#8212; RKO-LIO: Lidar-inertial odometry without sensor-specific modeling</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=5ecbeea2" />
    <link rel="stylesheet" type="text/css" href="../../_static/basic.css?v=b08954a9" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css?v=f6a572b4" />
    <link rel="stylesheet" type="text/css" href="../../_static/collapsible-lists/css/tree_view.css?v=a885cde7" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css?v=56c4699f" />
    <script src="../../_static/documentation_options.js?v=6e0256f3"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/collapsible-lists/js/CollapsibleLists.compressed.js?v=73120307"></script>
    <script src="../../_static/collapsible-lists/js/apply-collapsible-lists.js?v=660e4f45"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Core dependencies" href="core_dependencies.html" />
    <link rel="prev" title="The sensor data" href="data.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">RKO-LIO</a></h1>



<p class="blurb">Lidar-inertial odometry</p>




<p>
<iframe src="https://ghbtns.com/github-btn.html?user=PRBonn&repo=rko_lio&type=star&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>






<search id="searchbox" style="display: none" role="search">
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="Search"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Quickstart</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="general.html">General details</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="data.html">Sensor data</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Configuring rko_lio</a></li>
<li class="toctree-l2"><a class="reference internal" href="core_dependencies.html">Core dependencies</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../ros.html">ROS (C++)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python.html">Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../__LICENSE.html">License</a></li>
</ul>


<hr />
<ul>
    
    <li class="toctree-l1"><a href="https://index.ros.org/p/rko_lio/">ROS Index</a></li>
    
    <li class="toctree-l1"><a href="https://pypi.org/project/rko-lio/">PyPI</a></li>
    
    <li class="toctree-l1"><a href="https://github.com/PRBonn/rko_lio">GitHub</a></li>
    
</ul>

        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="configuring-the-odometry">
<h1>Configuring the odometry<a class="headerlink" href="#configuring-the-odometry" title="Link to this heading">¶</a></h1>
<p>Covered here are the parameters for the odometry itself. These are shared across the Python and ROS versions, and can be specified in their respective config files. Please refer to the version specific usage documentation for further information on that.</p>
<p>The odometry has a set of runtime parameters that are common across both the Python bindings and the ROS interface.</p>
<p>The defaults are sane, and I’ve used the defaults with success across a number of platforms, datasets, etc.</p>
<p>But your specific application might still benefit from or need some tuning, so I’ve given some brief description below.</p>
<p>The physical units are always SI units.</p>
<ul>
<li><p><strong>deskew</strong> (<cite>bool</cite>, default <code class="docutils literal notranslate"><span class="pre">True</span></code>)</p>
<p>Whether to apply scan deskewing before registration.</p>
<p>This compensates for the motion that happens during LiDAR scan collection, since your platform is probably moving while the LiDAR is collecting data.</p>
<p>Unless you have very good reason, always keep this enabled.</p>
</li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><code class="docutils literal notranslate"><span class="pre">deskew=True</span></code> <strong>requires</strong> per-point timestamps in the LiDAR scan, i.e., the scan needs to have <code class="docutils literal notranslate"><span class="pre">xyzt</span></code> per-point where <code class="docutils literal notranslate"><span class="pre">t</span></code> is time.
If you cannot provide this, then deskewing should be disabled.</p>
</div>
<ul>
<li><p><strong>double_downsample</strong> (<cite>bool</cite>, default <code class="docutils literal notranslate"><span class="pre">True</span></code>)</p>
<p>Useful for dense LiDARs.</p>
<p>Disabling this for sparse sensors, like a VLP-16 compared to an Ouster-128, can potentially improve results.
Indoor scenes can also see an improvement by disabling this.</p>
</li>
<li><p><strong>voxel_size</strong> (<cite>float</cite>, default <code class="docutils literal notranslate"><span class="pre">1.0</span></code>)</p>
<p>The voxel resolution of the internal local map (in meters).</p>
<p>Smaller values create finer maps at higher memory/computation cost.
Reducing this for sparse sensors or indoor scenes can help improve results.</p>
</li>
<li><p><strong>max_range</strong> (<cite>float</cite>, default <code class="docutils literal notranslate"><span class="pre">100.0</span></code>)</p>
<p>Maximum usable LiDAR range in meters.</p>
<p>Points beyond this cutoff are ignored.
Reducing this is an easy way to reduce compute requirements, since you typically won’t need information from 100m away for odometry.
Nevertheless, this is the default.</p>
</li>
<li><p><strong>min_range</strong> (<cite>float</cite>, default <code class="docutils literal notranslate"><span class="pre">1.0</span></code>)</p>
<p>Minimum LiDAR range in meters.</p>
<p>Points closer than this are discarded.
Useful if your platform shows up in the scan due to occlusions.</p>
</li>
<li><p><strong>max_points_per_voxel</strong> (<cite>int</cite>, default <code class="docutils literal notranslate"><span class="pre">20</span></code>)</p>
<p>Maximum number of points stored per voxel in the VDB map.</p>
<p>Affects both memory and ICP data association.</p>
<p>In case you need more runtime performance, you can reduce this.
Odometry performance will be a bit affected, but how much depends on the environment.</p>
</li>
<li><p><strong>max_correspondance_distance</strong> (<cite>float</cite>, default <code class="docutils literal notranslate"><span class="pre">0.5</span></code>)</p>
<p>Maximum distance threshold (meters) for ICP data associations.</p>
</li>
<li><p><strong>max_iterations</strong> (<cite>int</cite>, default <code class="docutils literal notranslate"><span class="pre">100</span></code>)</p>
<p>Limit on the number of iterations for ICP.</p>
<p>You can limit this a bit more if runtime is an issue.
Typically the convergence criterion is satisfied much earlier anyways.</p>
</li>
<li><p><strong>convergence_criterion</strong> (<cite>float</cite>, default <code class="docutils literal notranslate"><span class="pre">1e-5</span></code>)</p>
<p>Termination criterion for optimization.
Lower (stricter) values will requires more ICP iterations.</p>
</li>
<li><p><strong>max_num_threads</strong> (<cite>int</cite>, default <code class="docutils literal notranslate"><span class="pre">0</span></code>)</p>
<p>Only used to parallelize data association for ICP.
<code class="docutils literal notranslate"><span class="pre">0</span></code> means autodetect based on hardware.</p>
<p>In case compute resources are a constraint, limit this to a few threads and, in order, <code class="docutils literal notranslate"><span class="pre">max_points_per_voxel</span></code>, <code class="docutils literal notranslate"><span class="pre">voxel_size</span></code>, <code class="docutils literal notranslate"><span class="pre">max_range</span></code>, <code class="docutils literal notranslate"><span class="pre">max_iterations</span></code> are the parameters you probably care about.</p>
</li>
<li><p><strong>initialization_phase</strong> (<cite>bool</cite>, default <code class="docutils literal notranslate"><span class="pre">False</span></code>)</p>
<p>Initializes the system orientation (roll and pitch) plus IMU biases using the IMU measurements between the first two LiDAR scans the odometry receives.</p>
<p>If enabled, the second frame is assumed to be coincident with the first.
I.e., the assumption is that the system is at rest for that duration and the system is oriented to align with gravity.
This helps if you start from an inclined surface for example.</p>
<p>Usually you can leave this enabled. Unless for some reason you need to start the odometry while the system is in motion, then disable this.</p>
<p>I highly recommend enabling this.</p>
</li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><code class="docutils literal notranslate"><span class="pre">initialization_phase=True</span></code> requires you to ensure that the system starts from rest.
Otherwise, the system will estimate incorrect biases and the odometry might not work as expected.
Hence, why this is set to <code class="docutils literal notranslate"><span class="pre">False</span></code> by default and is opt-in.</p>
</div>
<ul>
<li><p><strong>max_expected_jerk</strong> (<cite>float</cite>, default <code class="docutils literal notranslate"><span class="pre">3.0</span></code>)</p>
<p>This value is used in a Kalman filter to estimate the true body acceleration.</p>
<p>It should reflect the motion you expect from the platform you will deploy the odometry on.
A good range is [1-3] m/s³, but it should be fine to leave it at 3 m/s³ as that is a good setting for most platforms.</p>
</li>
<li><p><strong>min_beta</strong> (<cite>float</cite>, default <code class="docutils literal notranslate"><span class="pre">200.0</span></code>)</p>
<p>The minimum weight applied to an orientation regularization cost during scan alignment.</p>
<p>Essentially we use the accelerometer readings as an additional observation on the roll and pitch of the system (we need to estimate the true body acceleration using the Kalman filter mentioned above).
This parameter influences how much importance this additional observation plays in the optimization, as we cannot have a perfect observation of the true body acceleration (the estimate is affected by gravity and the odometry itself).
The default should be fine for most cases.</p>
<p>You can set it <code class="docutils literal notranslate"><span class="pre">-1</span></code> to disable this additional cost.</p>
</li>
</ul>
</section>


          </div>
              <div class="related bottom">
                &nbsp;
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="data.html" title="Previous document">The sensor data</a>
        </li>
        <li>
          <a href="core_dependencies.html" title="Next document">Core dependencies</a>
          &rarr;
        </li>
    </ul>
  </nav>
              </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &#169;2025 Meher Malladi.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.2.3</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="../../_sources/pages/general/config.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>